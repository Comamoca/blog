---
title: '2025-07-21の日報'
description: '7/21の日報をお届けいたします。'
pubDate: 'Jul 21 2025 '
emoji: 🦊
tags: []
draft: false
---

## 今日やったこと

### Lustreやった

<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">GleamのLustreでクリックした日付を取得して表示するコンポーネント作れた<br>これ作るのに一日かかった...TEA難しい...<a href="https://twitter.com/hashtag/gleamlang?src=hash&amp;ref_src=twsrc%5Etfw">#gleamlang</a> <a href="https://twitter.com/hashtag/lustre?src=hash&amp;ref_src=twsrc%5Etfw">#lustre</a> <a href="https://t.co/u9UzzKEi2k">pic.twitter.com/u9UzzKEi2k</a></p>&mdash; こまもか🦊 (@Comamoca_) <a href="https://twitter.com/Comamoca_/status/1947323337681809633?ref_src=twsrc%5Etfw">July 21, 2025</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

LustreでカレンダーUIを作ってみた。
本当はこれを使ってTwitterの検索クエリを動的に生成するツールを作ろうとしたのだけど、そこまでいけなかった。

カレンダーのUI部分は[cally](https://wicky.nillia.ms/cally/)とDaisyUIを使っている。

特にこの手のUIは副作用がある訳だけど、その副作用をLustreのside
effectに落とし込むのが難しかった。
始めはffiでEventListeinerを登録する関数を作って、それをLustre側で呼び出すものかと思っていた。
けれど、実はplinthを使うことでそのあたりを吸収してGleam側で扱えるという事に気付いたので、最終的にはかなりスッキリしたコードになっている。

`Msg`の中で使う型を始めは`Date`にしてたのだけど、そうすると何故か状態の変更が反映されない問題が起ったので`String`に戻した。
本当は状態の中では型として扱うようにした方が良いと思うので、次はそのあたりの改善をやっていきたい。
カレンダーUIはわりと使うUIだと思うので、これをcomponentとして切り出すやつもやっていきたいところ。

## 明日以降やりたいこと

gleam-jpのサイトをそろそろ作りたい。
