---
title: "2024-12-13の日報"
description: "12/13の日報をお届けいたします。"
pubDate: "Dec 13 2024"
emoji: 🦊
tags: []
draft: false
---

NixOSをラズパイにインストールしようとした際のTipsをメモしてみる。

NixOSをSDカードにインストールする場合はnixos.orgからではなくhydraと呼ばれるNixOSのCIサービスからダウンロードする。

多分現状これが一番新しいもの。

https://hydra.nixos.org/build/282081678

このサイトのFile欄にあるURLをクリック又はwgetするとダウンロードされる。
注意点としては、ファイルがそのまま落とされるため進捗が分からないので、プログレスバーを付けるなり工夫した方が良さそう。

## 今日やったこと

### k3s

唐突にラズパイにk3sを入れたくなったので入れていた。
当初はNixOSにしようとしたけど、ネットワーク周りの設定をするのが面倒で諦めた。
NixOSでやるなら設定込みのisoを作成してからの方が良さそう。

自分が使用しているPi 3Bに固有の問題かもしれないけど、 cgroups
v2が見つからないっていうエラーが出ててこずった。

これは`cmdline.txt`(もしかしたら`/boot/firmware/cmdline.txt`かもしれない)に`cgroup_memory=1 cgroup_enable=memory`を**追記**する必要がある。

改行だと有効にならず時間を溶かしたので要注意。

## 明日以降やりたいこと

Gleamとk8sとかできたら良いなぁと思っている。
