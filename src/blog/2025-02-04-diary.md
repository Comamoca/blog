---
title: "2025-02-04の日報"
description: "02/4の日報をお届けいたします。"
pubDate: "Feb 4 2025"
emoji: 🦊
tags: []
draft: false
---

## 今日やったこと

### Nix

GleamのローカルパッケージをNixで管理する方法を考えていた。

flake.nixのパッケージ定義とgleam.tomlの内容を同期させる必要があるのでその方法が実装のネックになりそうだなと思っている。

TOMLの読み取りについてはNixでもできるけど、コメントを保持させたり特定の要素だけ編集したTOMLを生成させたりなど細やかな
操作が必要なのでNixでは難しいと思った。

そこでPythonを使おうと考えたのだけど、標準のtomlライブラリでもコメントの保持はできないらしい。
調べたところtomlライブラリの代替としてtomlkitというライブラリが良いと紹介している記事を見つけたので、それで実装できそうだと見通しが立った。
nixpkgsでも使えるので使用コストは実質ゼロ[^1]なのも魅力的。

https://7rikazhexde-techlog.hatenablog.com/entry/2023/03/10/234923

nvfetcherを使用して自動的にパッケージを更新する仕組みとかがあったら良いと思っているけれど、
これに関しても設定ファイルがtomlなのでtomlkitをそのまま使うことができそう。

## 明日以降やりたいこと

tomlkitを使ったり、Nixとの連携について調べていきたい。

[^1]: nixpkgsにあるソフトウェアの導入コストは実質ゼロだと考えている。
